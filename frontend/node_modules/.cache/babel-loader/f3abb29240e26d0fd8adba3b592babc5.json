{"ast":null,"code":"import * as actionTypes from '../constants/accountConstants';\nimport axios from 'axios'; // export const getAccounts = () => async dispatch => {\n// \ttry {\n// \t\tdispatch({ type: actionTypes.GET_ACCOUNTS_REQUEST });\n// \t\tlet { data } = await axios.get('http://localhost:4000/accounts');\n// \t\tdispatch({\n// \t\t\ttype: actionTypes.GET_ACCOUNTS_SUCCESS,\n// \t\t\tpayload: data\n// \t\t});\n// \t} catch (error) {\n// \t\tdispatch({\n// \t\t\ttype: actionTypes.GET_ACCOUNTS_FAIL,\n// \t\t\tpayload: error.response && error.response.data.message ? error.response.data.message : error.message\n// \t\t});\n// \t}\n// };\n\nexport const addAccount = account => async dispatch => {\n  try {\n    dispatch({\n      type: actionTypes.POST_ACCOUNT_REQUEST\n    });\n    let {\n      data\n    } = await axios.post('http://localhost:4000/accounts/', account);\n    dispatch({\n      type: actionTypes.POST_ACCOUNT_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: actionTypes.POST_ACCOUNT_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const getAccountCart = id => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: actionTypes.LOAD_ACCOUNT_CART_REQUEST\n    });\n    let {\n      data\n    } = await axios.get(`http://localhost:4000/accounts/${id}`);\n    dispatch({\n      type: actionTypes.LOAD_ACCOUNT_CART_SUCCESS,\n      payload: [...data.cart]\n    });\n    localStorage.setItem('cart', JSON.stringify(getState().cart.cartItems));\n  } catch (error) {\n    dispatch({\n      type: actionTypes.LOAD_ACCOUNT_CART_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const addToCart = (productId, quantity, account) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: actionTypes.ADD_TO_CART_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`http://localhost:4000/products/${productId}`);\n    account.cart.push({\n      productId: data._id,\n      name: data.name,\n      imageUrl: data.imageUrl,\n      price: data.price,\n      countInStock: data.countInStock,\n      quantity\n    });\n    let accountToUpdate = {\n      username: account.username,\n      password: account.password,\n      cart: [...account.cart]\n    };\n    await axios.put(`http://localhost:4000/accounts/${account._id}`, [...account.cart]);\n    dispatch({\n      type: actionTypes.ADD_TO_CART_SUCCESS,\n      payload: {\n        productId: data._id,\n        name: data.name,\n        imageUrl: data.imageUrl,\n        price: data.price,\n        countInStock: data.countInStock,\n        quantity\n      }\n    });\n    localStorage.setItem('cart', JSON.stringify(getState().cart.cartItems));\n  } catch (error) {\n    dispatch({\n      type: actionTypes.ADD_TO_CART_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const removeFromCart = (productId, account) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: actionTypes.REMOVE_FROM_CART_REQUEST\n    });\n    await axios.put(`http://localhost:4000/accounts/${account._id}`, [...account.cart.filter(product => product.productId !== productId)]);\n    dispatch({\n      type: actionTypes.REMOVE_FROM_CART_SUCCESS,\n      payload: productId\n    });\n    localStorage.setItem('cart', JSON.stringify(getState().getAccounts.loggedUser.cart));\n  } catch (error) {\n    dispatch({\n      type: actionTypes.REMOVE_FROM_CART_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/elada/OneDrive/שולחן העבודה/Fullstack Projects/eCommerce-Website/frontend/src/redux/actions/accountActions.js"],"names":["actionTypes","axios","addAccount","account","dispatch","type","POST_ACCOUNT_REQUEST","data","post","POST_ACCOUNT_SUCCESS","payload","error","POST_ACCOUNT_FAIL","response","message","getAccountCart","id","getState","LOAD_ACCOUNT_CART_REQUEST","get","LOAD_ACCOUNT_CART_SUCCESS","cart","localStorage","setItem","JSON","stringify","cartItems","LOAD_ACCOUNT_CART_FAIL","addToCart","productId","quantity","ADD_TO_CART_REQUEST","push","_id","name","imageUrl","price","countInStock","accountToUpdate","username","password","put","ADD_TO_CART_SUCCESS","ADD_TO_CART_FAIL","removeFromCart","REMOVE_FROM_CART_REQUEST","filter","product","REMOVE_FROM_CART_SUCCESS","getAccounts","loggedUser","REMOVE_FROM_CART_FAIL"],"mappings":"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","sourcesContent":["import * as actionTypes from '../constants/accountConstants';\r\nimport axios from 'axios';\r\n\r\n// export const getAccounts = () => async dispatch => {\r\n// \ttry {\r\n// \t\tdispatch({ type: actionTypes.GET_ACCOUNTS_REQUEST });\r\n// \t\tlet { data } = await axios.get('http://localhost:4000/accounts');\r\n// \t\tdispatch({\r\n// \t\t\ttype: actionTypes.GET_ACCOUNTS_SUCCESS,\r\n// \t\t\tpayload: data\r\n// \t\t});\r\n// \t} catch (error) {\r\n// \t\tdispatch({\r\n// \t\t\ttype: actionTypes.GET_ACCOUNTS_FAIL,\r\n// \t\t\tpayload: error.response && error.response.data.message ? error.response.data.message : error.message\r\n// \t\t});\r\n// \t}\r\n// };\r\n\r\nexport const addAccount = account => async dispatch => {\r\n\ttry {\r\n\t\tdispatch({ type: actionTypes.POST_ACCOUNT_REQUEST });\r\n\t\tlet { data } = await axios.post('http://localhost:4000/accounts/', account);\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.POST_ACCOUNT_SUCCESS,\r\n\t\t\tpayload: data\r\n\t\t});\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.POST_ACCOUNT_FAIL,\r\n\t\t\tpayload: error.response && error.response.data.message ? error.response.data.message : error.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const getAccountCart = id => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: actionTypes.LOAD_ACCOUNT_CART_REQUEST });\r\n\t\tlet { data } = await axios.get(`http://localhost:4000/accounts/${id}`);\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.LOAD_ACCOUNT_CART_SUCCESS,\r\n\t\t\tpayload: [ ...data.cart ]\r\n\t\t});\r\n\t\tlocalStorage.setItem('cart', JSON.stringify(getState().cart.cartItems));\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.LOAD_ACCOUNT_CART_FAIL,\r\n\t\t\tpayload: error.response && error.response.data.message ? error.response.data.message : error.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const addToCart = (productId, quantity, account) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: actionTypes.ADD_TO_CART_REQUEST });\r\n\t\tconst { data } = await axios.get(`http://localhost:4000/products/${productId}`);\r\n\r\n\t\taccount.cart.push({\r\n\t\t\tproductId: data._id,\r\n\t\t\tname: data.name,\r\n\t\t\timageUrl: data.imageUrl,\r\n\t\t\tprice: data.price,\r\n\t\t\tcountInStock: data.countInStock,\r\n\t\t\tquantity\r\n\t\t});\r\n\t\tlet accountToUpdate = {\r\n\t\t\tusername: account.username,\r\n\t\t\tpassword: account.password,\r\n\t\t\tcart: [ ...account.cart ]\r\n\t\t};\r\n\t\tawait axios.put(`http://localhost:4000/accounts/${account._id}`, [ ...account.cart ]);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.ADD_TO_CART_SUCCESS,\r\n\t\t\tpayload: {\r\n\t\t\t\tproductId: data._id,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\timageUrl: data.imageUrl,\r\n\t\t\t\tprice: data.price,\r\n\t\t\t\tcountInStock: data.countInStock,\r\n\t\t\t\tquantity\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlocalStorage.setItem('cart', JSON.stringify(getState().cart.cartItems));\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.ADD_TO_CART_FAIL,\r\n\t\t\tpayload: error.response && error.response.data.message ? error.response.data.message : error.message\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const removeFromCart = (productId, account) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: actionTypes.REMOVE_FROM_CART_REQUEST });\r\n\r\n\t\tawait axios.put(`http://localhost:4000/accounts/${account._id}`, [ ...account.cart.filter(product => product.productId !== productId) ]);\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.REMOVE_FROM_CART_SUCCESS,\r\n\t\t\tpayload: productId\r\n\t\t});\r\n\r\n\t\tlocalStorage.setItem('cart', JSON.stringify(getState().getAccounts.loggedUser.cart));\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: actionTypes.REMOVE_FROM_CART_FAIL,\r\n\t\t\tpayload: error.response && error.response.data.message ? error.response.data.message : error.message\r\n\t\t});\r\n\t}\r\n};\r\n"]},"metadata":{},"sourceType":"module"}